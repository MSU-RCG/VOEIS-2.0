<H3><%= @model.name.demodulize.titleize %> (<%= @model.count %>)</H3>

<%- form_for(@model, :url => search_project_yogo_data_path(@project, @model.name.demodulize), :html => {:method => :get} ) do |f| -%>
  <%= text_field_tag("search_term") %>
  <%= f.submit('Search') %>
<%- end -%>

<table id="data-index">
  <thead>
    <tr>
      <th></th><th></th>
      <%- @model.properties.each do |h| %>
      <th><%= h.name.to_s.titleize %></th>
      <%- end %>
    </tr>
  </thead>
  <tbody>
  <%- @data.each do |d| %>
    <tr>
      <td><%= link_to(image_tag('edit.png')+'Edit', edit_project_yogo_data_path(@project, @model.name.demodulize, d.id)) %></td>
      <td><%= link_to(image_tag('remove.png')+'Delete', project_yogo_data_path(@project, @model.name.demodulize, d.id), :method => :delete, :confirm => "There is no undo.\n Continue?") %></td>
      <%- @model.properties.each do |p| %>
      <td><%= d[p.name] %></td>
      <%- end %>
    </tr>
    <%- end %>
  </tbody>
</table>
<div id="pagination-links">
  <%= pagination_links(@data, params[:page], 10) %>
</div>
<div id="add-datum">
  <h3>Add New Data</h3><br>
<%= link_to('Add New Data Item', new_project_yogo_data_path(@project, @model.name.demodulize))%>
<%= render :partial => 'csv_form'%>
</div>

